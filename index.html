<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Smart Urban Flood Management</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<!-- EmailJS -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
(function(){
    emailjs.init("3aYlgGOD4ovYXKZNh"); 
})();
</script>

<style>
body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    background: #f4f6f9;
    color: #333;
}
header {
    background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)),
    url("https://images.unsplash.com/photo-1509395176047-4a66953fd231");
    background-size: cover;
    background-position: center;
    color: white;
    text-align: center;
    padding: 90px 20px;
}
header h1 {
    font-size: 42px;
}
section {
    max-width: 1100px;
    margin: auto;
    padding: 40px 20px;
}
h2 {
    text-align: center;
    color: #0a3d62;
}
.cards, .dashboard {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px,1fr));
    gap: 20px;
}
.card {
    background: white;
    padding: 25px;
    border-radius: 10px;
    box-shadow: 0 6px 15px rgba(0,0,0,0.1);
    text-align: center;
}
.value {
    font-size: 30px;
    font-weight: bold;
    color: #e55039;
}
button {
    background: #1e3799;
    color: white;
    border: none;
    padding: 14px 25px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 16px;
}
button:hover {
    background: #4a69bd;
}
.alert {
    margin-top: 15px;
    font-weight: bold;
}
footer {
    background: #0a3d62;
    color: white;
    text-align: center;
    padding: 20px;
}
</style>
</head>

<body>

<header>
    <h1>Smart Urban Flood Management</h1>
    <p>AI & IoT Based Real-Time Monitoring & Email Alert System</p>
</header>

<section>
<h2>Real-Time Monitoring Dashboard</h2>
<div class="dashboard">
    <div class="card">
        <h3>Water Level</h3>
        <div class="value" id="water">60 cm</div>
    </div>
    <div class="card">
        <h3>Gas Level</h3>
        <div class="value" id="gas">210 ppm</div>
    </div>
    <div class="card">
        <h3>Status</h3>
        <div class="value" id="status" style="color:green;">Normal</div>
    </div>
</div>
</section>

<section>
<h2>Emergency Email Alert</h2>
<p style="text-align:center;">Automatically sends an email when danger level is detected.</p>
<div style="text-align:center;">
    <button onclick="sendAlert()">Trigger Alert</button>
    <div class="alert" id="alertMsg"></div>
</div>
</section>

<footer>
<p>Developed by AI & DS Students | Smart City Project</p>
</footer>

<script>
function random(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

// Real-time simulation
setInterval(() => {
    let water = random(50, 95);
    let gas = random(150, 420);

    document.getElementById("water").innerText = water + " cm";
    document.getElementById("gas").innerText = gas + " ppm";

    if (water > 75 || gas > 300) {
        document.getElementById("status").innerText = "CRITICAL";
        document.getElementById("status").style.color = "red";
    } else {
        document.getElementById("status").innerText = "Normal";
        document.getElementById("status").style.color = "green";
    }
}, 2000);

// EMAIL ALERT FUNCTION
function sendAlert() {
    let params = {
        location: "Coimbatore – Drainage Zone 3",
        water: document.getElementById("water").innerText,
        gas: document.getElementById("gas").innerText
    };

    emailjs.send(
        "service_25g1f8m",
        "template_18gznob",
        params
    ).then(function() {
        document.getElementById("alertMsg").innerText =
        "✅ Email alert sent successfully!";
    }, function(error) {
        document.getElementById("alertMsg").innerText =
        "❌ Email sending failed!";
    });
}
</script>

</body>
</html>
